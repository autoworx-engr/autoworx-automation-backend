// Salary History model to track changes in salary configuration
// This allows proper calculation of payouts across different salary periods
model SalaryHistory {
    id           Int        @id @default(autoincrement())
    userId       Int        @map("user_id")
    companyId    Int        @map("company_id")
    salaryType   SalaryType @map("salary_type")
    salaryAmount Decimal    @map("salary_amount") @db.Decimal(10, 2)
    startDate    DateTime   @map("start_date")
    endDate      DateTime?  @map("end_date") // null means current/active salary
    isActive     Boolean    @default(true) @map("is_active")
    createdAt    DateTime   @default(now()) @map("created_at")
    updatedAt    DateTime   @default(now()) @updatedAt @map("updated_at")

    user    User    @relation(fields: [userId], references: [id], onDelete: Cascade)
    company Company @relation(fields: [companyId], references: [id], onDelete: Cascade)

    @@index([userId, isActive], name: "fk_salary_history_user_active")
    @@index([companyId], name: "fk_salary_history_company")
    @@index([startDate, endDate], name: "idx_salary_history_dates")
}

enum SalaryType {
    HOURLY
    BI_WEEKLY
    WEEKLY
    MONTHLY
}
