// notification settings model
model NotificationSettingsV2 {
  id                Int                 @id @default(autoincrement())
  companyId         Int                 @map("company_id")
  userId            Int                 @map("user_id")
  section           NotificationSection
  notification_type NotificationType
  email_enabled     Boolean             @default(false) @map("email_enabled")
  push_enabled      Boolean             @default(false) @map("push_enabled")
  text_enabled      Boolean             @default(false) @map("text_enabled")
  last_updated      DateTime            @default(now()) @map("last_updated")
  createdAt         DateTime            @default(now())
  updatedAt         DateTime            @updatedAt
  company           Company             @relation(fields: [companyId], references: [id], onDelete: Cascade)
  user              User                @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([userId, notification_type], name: "user_notification_type")
}

enum NotificationType {
  TASK_ASSIGNED
  TASK_FINISHED
  APPOINTMENT_CREATED
  APPOINTMENT_REMINDER
  APPOINTMENT_UPDATED
  TASK_REMINDER
  LEADS_GENERATED
  LEADS_CLOSED
  FOLLOW_UP
  LEADS_ASSIGNED
  STAGE
  ESTIMATE_CREATED
  INVOICE_CREATED
  INVOICE_DELIVERY
  INVOICE_CONVERTED
  INVOICE_AUTHORIZED
  PAYMENT_RECEIVED
  PAYMENT_DUE
  DEPOSIT
  WORK_ORDER_CREATED
  WORK_ORDER_COMPLETED
  DUE_DATE_PROXIMITY
  INVENTORY_COMPLETELY_OUT
  INVENTORY_NEWLY_ADDED
  INVENTORY_LOW
  LEAVE_REQUEST
  PERFORMANCE_CHANGES
  LATE_ARRIVALS
  EARLY_LEAVE
  JOB_COMPLETED
  JOB_ASSIGNED
  INTERNAL_MESSAGE_ALERT
  CLIENT_MESSAGE_ALERT
  CLIENT_CALL_ALERT
  CLIENT_EMAIL_ALERT
  COLLABORATION_MESSAGE_ALERT
}

enum NotificationSection {
  CALENDAR_AND_TASK
  LEAD_GENERATED_AND_SALES_PIPELINE
  ESTIMATE_AND_INVOICE
  PAYMENT
  OPERATION_PIPELINE
  INVENTORY
  WORK_FORCE
  COMMUNICATIONS
}

model Notification {
  id          Int      @id @default(autoincrement())
  userId      Int      @map("user_id")
  companyId   Int      @map("company_id")
  type        String?
  title       String
  description String
  isUnRead    Boolean  @default(true) @map("is_unread")
  avatarUrl   String?
  redirectUrl String?
  createdAt   DateTime @default(now()) @map("created_at")
  updatedAt   DateTime @default(now()) @updatedAt @map("updated_at")
  user        User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  company     Company  @relation(fields: [companyId], references: [id], onDelete: Cascade)
}
